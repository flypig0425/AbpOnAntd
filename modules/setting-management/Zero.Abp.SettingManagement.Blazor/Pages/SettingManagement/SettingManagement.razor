@page "/setting-management"
@*@using Volo.Abp.Features
    @attribute [RequiresFeature(SettingManagementFeatures.Enable)]
*@
@* ************************* PAGE HEADER ************************* *@

<PageHeader Title="@L["Settings"]" BreadcrumbItems="@BreadcrumbItems">

</PageHeader>

<GridContent>
    <div className={styles.main}
         ref={(ref) =>
        {
        if (ref) {
        dom.current = ref;
        }
        }}
        >
        <div className={styles.leftMenu}>
            <Menu mode={initConfig.mode}
                  selectedKeys={[initConfig.selectKey]}
                  onClick={({ key })=>
                {
                setInitConfig({
                ...initConfig,
                selectKey: key as SettingsStateKeys,
                });
                }}
                >
                {getMenu()}
            </Menu>
        </div>
        <div className={styles.right}>
            <div className={styles.title}>{menuMap[initConfig.selectKey]}</div>
            {renderChildren()}
        </div>
    </div>
</GridContent>


<Card>
    <CardBody>
        <Tabs @bind-SelectedTab="@SelectedGroup" TabPosition="TabPosition.Left" Pills="true">
            <Items>
                @foreach (var group in SettingComponentCreationContext.Groups)
                {
                    <Tab Name="@GetNormalizedString(group.Id)">
                        @group.DisplayName
                    </Tab>
                }
            </Items>
            <Content>
                @foreach (var group in SettingComponentCreationContext.Groups)
                {
                    <TabPanel Name="@GetNormalizedString(group.Id)">
                        <h2>@group.DisplayName</h2>
                        <Divider />

                        @{
                            SettingItemRenders.Add(builder =>
                            {
                                builder.OpenComponent(0, group.ComponentType);
                                builder.CloseComponent();
                            });
                        }

                        @SettingItemRenders.Last()
                    </TabPanel>
                }
            </Content>
        </Tabs>
    </CardBody>
</Card>

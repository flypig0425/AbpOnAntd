@namespace Zero.Abp.AntdesignUI.Layout
@inherits SettingDrawerBase

<AntList Split="false"
         DataSource="SettingItems"
         ItemLayout="ListItemLayout.Horizontal">
    <ListItem>
        <span style="opacity: @(context.Disabled ? "0.5" : "1")">@context.Title</span>
        @context.Action
    </ListItem>
</AntList>

@code
{
    RenderFragment SwitchRender(Expression<Func<LayoutSettings, bool>> propertySelector, Func<bool> valueFactory)
    {
        return @<Template>
        <Switch Size="small" Checked="@valueFactory.Invoke()"
            OnChange="value=>UpdateSettingAsync(propertySelector,valueFactory,value)" />
    </Template> ;
    }
    
    public SettingItem[] SettingItems { get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();

        SettingItems = new[] {
            new SettingItem
            {
                Title = L["Header"],
                Action =SwitchRender(x=>x.HeaderRender,()=>Settings.HeaderRender)
            },
            new SettingItem
            {
                Title =  L["Footer"],
                Action =SwitchRender(x=>x.FooterRender,()=>Settings.FooterRender)
            },
            new SettingItem
            {
                Title =  L["Menu"],
                Action =SwitchRender(x=>x.MenuRender,()=>Settings.MenuRender)
            },
            new SettingItem
            {
                Title =  L["MenuHeader"],
                Action =SwitchRender(x=>x.MenuHeaderRender,()=>Settings.MenuHeaderRender)
            },
        };
    }
}